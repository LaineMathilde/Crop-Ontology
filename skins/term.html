<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<head>
    <title>{{term_name}}</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="The curation and annotation web site is a participatory and intuitive tool for browsing the Crop Ontology of the Generation Challenge Programme. It gives access to specific crop trait terms with definition, measurement methods, scales and photos. Anyone can post a suggestion  for a term. The annotation tool is still a prototype.  Please provide feedback and consult the video tutorials to get a visual explanation of the web site use." />
    <link rel="stylesheet" type="text/css" href="/stylesheets/reset-fonts-grids.css" media="all" /> 
    <link rel="stylesheet" type="text/css" href="/stylesheets/resume.css" media="all" />
<script type="text/javascript" src="/js/jquery.min.1.5.2.js"></script>
<script type="text/javascript" src="/js/markdown.js?{{>VERSION}}"></script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9565684-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script>
var term_name = "{{term_name}}";
var term_id = "{{term_id}}";
var languages = {{>languages}};
var ontologyid = '';
var termid = '';
$.fn.autocomplete = function(){};

</script>
<script type="text/javascript" src="/js/main.js?{{>VERSION}}"></script>

<script>
$(function(){

function loader(show) {
    if(show)
        $(".loader").show();
    else
        $(".loader").hide();
}

function show_attributes(attributes) {
    // let's not show these attributes - even though they're returned from the API
    var hide = {
        ontology_id: true,
        ontology_name: true,
        is_a: true,
        'Name of Trait': true,
        'language': true,
        'Scale ID for modification, Blank for New':true,
        'Method ID for modification, Blank for New': true,
        'Trait ID for modification, Blank for New': true,
        'Language of submission (only in ISO 2 letter codes)': true
    };

    var first = {
        'Abbreviated name': true,
        'Synonyms': true,
        'Description': true,
        'Trait class': true,
        'How is trait': true
    }
    var last = {
        'Name of submitting scientist': true,
        'Institution': true,
        'Date of submission': true,
        'Bibliographic': true,
        'Updated': true,
    };

    runInOrder(first, last, attributes, function(i) {
        var currUser = {};
        currUser.language = "{{language}}";
        if(currUser.language == 'undefined')
            currUser.language = 'english';

        var t = translate(currUser, attributes[i]);
        var lang = currUser.language || DEFAULT_LANGUAGE;
        if(t.lang !== lang) return;
        $(".yui-b").append('\
            <div class="yui-gf">\
                <div class="yui-u first">\
                    <h2>'+i+'</h2>\
                </div>\
                <div class="yui-u">\
                    <p class="enlarge">'+markdown(t.translation)+'</p>\
                    <p id="languages" class="enlarge"></p>\
                </div>\
            </div>\
        ');
    }, hide);

}

// load all the attributes retrieved from the ols (XML)
function load_ols(func) {
    loader(true);
    var attributes = {};
    $.getJSON("/get-attributes/"+term_id, function(this_attrs) {

        // let's show the attributes
        $.each(this_attrs, function(i) {
            attributes[this_attrs[i].key] = this_attrs[i].value;
        });
        show_attributes(attributes);
        loader(false);
    });
}

// START


load_ols();
});
</script>
<style>
.yui-gc div.first, .yui-gd .yui-u {
    width: 100%;
}
#ft {
    border: 0;
}
#hd h1 {
    font-size: 20px;
}
img {
    max-width: 500px;
}
.yui-u {
    word-wrap: break-word;
    
}
</style>
</head>
<body id="resume">
<div class="yui-t7" id="doc2">
    <div id="inner">

        <div id="hd">
            <div class="yui-gc">
                <div class="yui-u first">
                    <hgroup>
                        <h1>{{term_name}}</h1>
                        <h2></h2>
                    </hgroup>
                </div>
                <div class="yui-u">
                    <div class="contact-info">
                        <a target="_blank" href="http://www.cropontology.org" title="Crop Ontology Curation Tool">Crop Ontology Curation Tool</a>
                        <h3><a target="_blank" href="http://www.cropontology.org/terms/{{term_id}}/{{term_name}}" title="{{ontology_name}}" class="email">{{ontology_name}}</a></h3></div><!--// .contact-info -->
                </div>

            </div><!--// .yui-gc -->
        </div><!--// hd -->

        <div id="bd">
            <div id="yui-main">
                <div class="yui-b">
                    <img src="/images/metabox_loader.gif" class="loader" style="display: none" />
                </div><!--// .yui-b -->
            </div><!--// yui-main -->
        </div><!--// bd -->


    </div><!-- // inner -->

</div>
</body>
</html>

